{{boilerplate1}}
<p>In PrototypeJungle, the fundamental unit of code is the <i>image generator</i> Let's start with an example. Consider the following code:</p>

<precode>
import {rs as rectPP} from '/shape/rectangle.mjs';
import {rs as basicsP} from '/generators/basics.mjs';
let rs = basicsP.instantiate();

rs.setName('example1');


rs.initProtos = function () {
  let rectP = this.rectP = rectPP.instantiate();
  rectP.fill = 'red';
  rectP.stroke = 'yellow';
  rectP['stroke-width'] = 1;
  rectP.width = 40;
  rectP.height = 20;
}  

rs.initialize = function () {
  this.initProtos();
  let {rectP} = this;
  let rect1 = rectP.instantiate();
  let rect2 = rectP.instantiate();
  rect2.fill = 'blue';
  rect2.height = 40;
  this.set('rect1',rect1);
  this.set('rect2',rect2);
  rect1.moveto(Point.mk(-40,0));
  rect2.moveto(Point.mk(40,0));
 }

export {rs};
</precode>
<p>This code appears in the file <a href="/generators/example1.mjs">/generators/example1.mjs</a>, and assuming you have installed and activated PrototypeJungle on this device, it can be run via the following link</p>
<precode>
<a href = "http://localhost:8081/draw.html?source=/generators/example1.mjs">http://localhost:8081/draw.html?source=/generators/example1.mjs</a>
</precode>
<p> Then, you will see the following image on your screen:</p>
 <p><img  src="/images/example1.jpg?alt=media" style="bborder:thin black solid;cursor:pointer"  width="600" height="300" max-height="500"/></p>

<p>Now, let's walk through the code, which already illustrates the main aspects of the system.  First of all example1.mjs defines a JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">module</a>, as indicated by the mjs extension. The first two lines import other modules, first the one that defines the rectangle element, and second one that defines some basic capabilites needed by most pattern-defining code (more on that later). Then we have the line</p>
<precode>
let rs = basicsP.instantiate();
</precode>
<p>
<b>instantiate</b> is the core operation of prototypejungle, and combines the effects of a deep tree copy with Object.create. More detail can be found <a href="/doc/prototypetree.html">here</a></p>


<p>The method <b>initProtos</b> takes the externally defined objects (here rectangles) and constructs internal variants which inherit from those external objects. 
Here <b>this.rectP</b> inherits from the externally defined <b>rectPP</b>. <b>rectP</b> in turn is assigned various properties: stroke, fill, stroke-width, width, and height. Prototypejungle implements visible shapes via <a href="https://developer.mozilla.org/en-US/docs/Web/SVG">SVG</a>, and their accessible properties are the same as those of the underlying SVG elements. </p>


<p>The initialize method (called automatically by the prototypejungle machinery when a module is loaded), does the actual work. In this case, two rectangles are defined, each of which inherit from <b>this.rectP</b>. <b>rect1</b> is unaltered, so its properties are the same as those of <b>rectP</b> (except for position). <b>initialize</b>, however, alters some properties of <b>rect2</b>. The lines</p>
<precode>   
this.set('r1',rect1);
this.set('r2',rect2); 
</precode>
  
  <p>stitch <b>rect1</b> and <b>rect2</b> into the main tree under names <b>r1</b> and <b>r2</b>, thus making them visible. The main tree, by the way, can always be accessed </p>



</body>
</html>